"use strict";require("core-js/modules/es.symbol.js"),require("core-js/modules/es.symbol.description.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.symbol.iterator.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/es.string.iterator.js"),require("core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderHTML=exports.getTopParentItem=exports.getParentsByTagName=exports.getParentsByName=exports.getParentsByClass=exports.getParentsFromAttribute=exports.getChildrenByName=exports.getChildrenByClass=exports.getChildrenFromAttribute=exports.gatherChildItems=exports.bindAllListeners=exports.bindListeners=exports.appendListeners=exports.assignListener=exports.retrieveListener=exports.registerListeners=exports.registerListener=exports.removeChild=exports.appendHTML=exports.bindElement=exports.generateElement=exports.updateElements=exports.updateElement=exports.setAndReturnAttribute=exports.setAttribute=exports.elementChanges=exports.elementCompareClassList=exports.elementHasAttribute=void 0,require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.split.js"),require("core-js/modules/es.object.keys.js"),require("core-js/modules/es.array.includes.js"),require("core-js/modules/es.string.includes.js"),require("core-js/modules/es.array.concat.js"),require("core-js/modules/es.array.splice.js"),require("core-js/modules/es.array.index-of.js"),require("core-js/modules/es.function.name.js"),require("core-js/modules/es.object.assign.js"),require("core-js/modules/es.array.reduce.js");const _functionalHelpers=_interopRequireDefault(require("functional-helpers")),_objects=require("./objects");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}const elementHasAttribute=function(e,t,n){return!!e.style&&(/^(style|className)$/.test(t)?_functionalHelpers.default.compareArrays("string"==typeof n?n.split(" "):Object.keys(n),"string"==typeof n?e[t].split(" "):Object.keys(e[t])):e.hasAttribute(t)&&e.getAttribute(t)===n)};exports.elementHasAttribute=elementHasAttribute;const elementCompareClassList=function(e,t){return _functionalHelpers.default.compareArrays(t.split(" "),[].from(e.classList))};exports.elementCompareClassList=elementCompareClassList;const elementChanges=function(e){return e.element.tagName.toLowerCase()!==e.tagName.toLowerCase()?generateElement(e):_functionalHelpers.default.setValue("attributes",_functionalHelpers.default.filterObject(e.attributes,(function(t,n){return _functionalHelpers.default.filterObject(_functionalHelpers.default.mapObject(e.attributes,(function(t,n){return"object"===_typeof(t)||"className"===n?_functionalHelpers.default.filterObject(elementHasAttribute(e.element,n,t),(function(e){return 1===e})):!elementHasAttribute(e.element,n,t)})),(function(e){return!!e}))[n]})),e)};exports.elementChanges=elementChanges;const setAttribute=function(e,t,n){return e.element.setAttribute(t,n),e};exports.setAttribute=setAttribute;const setAndReturnAttribute=function(e,t,n){return e.element.setAttribute(t,n),n};exports.setAndReturnAttribute=setAndReturnAttribute;const updateElement=function(e){if(!e.element.style)return e;const t=elementChanges(e);return t.attributes=_functionalHelpers.default.mapObject(t.attributes,(function(t,n){if(!_functionalHelpers.default.isObject(t)||_functionalHelpers.default.emptyObject(t))return n in e.element?_functionalHelpers.default.setAndReturnValue(e.element,n,t):setAndReturnAttribute(e,n,t);const r=_functionalHelpers.default.filterObject(t,(function(e,t){return/^\D+$/.test(t)}));return _functionalHelpers.default.reduceObject(r,(function(e,t,n){return _functionalHelpers.default.setValue(n,t,e)}),e.element.style)})),t};exports.updateElement=updateElement;const updateElements=function e(t){const n=updateElement(t);return _functionalHelpers.default.setValue("children",_functionalHelpers.default.mapObject(n.children,(function(t){return e(t)})),n)};exports.updateElements=updateElements;var generateElement=function(e){return updateElement(_functionalHelpers.default.setValue("element",document.createElement(e.tagName),e))};exports.generateElement=generateElement;const bindElement=function(e){return _functionalHelpers.default.setValue("element",e.element&&e.element.style?e.element:generateElement(e).element,e)};exports.bindElement=bindElement;const retrieveParentItem=function(e){return e.body?e.body:e},addUniqueToArray=function(e,t){return t.includes(e)?t:t.concat([e])},appendAndReturnChild=function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_objects.documentItem.body;return retrieveParentItem(t).element.appendChild(e.element),e},appendHTML=function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_objects.documentItem.body;return appendAndReturnChild(bindElement(e),_functionalHelpers.default.setValue("children",addUniqueToArray(e,retrieveParentItem(t).children),retrieveParentItem(t)))};exports.appendHTML=appendHTML;const removeChild=function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_objects.documentItem.body;return t.element.removeChild(e.element),t.children.splice(t.children.indexOf(e),1)};exports.removeChild=removeChild;const registerListener=function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.name,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_objects.documentItem;return Object.assign(n.eventListeners,_defineProperty({},t,e))};exports.registerListener=registerListener;const registerListeners=function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_objects.documentItem;return _functionalHelpers.default.setValue("eventListeners",_functionalHelpers.default.mergeObjectsMutable(t.eventListeners,e),t)};exports.registerListeners=registerListeners;const retrieveListener=function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_objects.documentItem;return Object.keys(t.eventListeners).includes(e)?t.eventListeners[e]:{}};exports.retrieveListener=retrieveListener;const listenerOptions=function e(t){if(void 0===e.supportsOptions){e.supportsOptions=!0;try{window.addEventListener("test",null,{capture:!1,once:!1,passive:!1})}catch(t){e.supportsOptions=!1}}return!("object"!==_typeof(t)||!e.supportsOptions)&&t},assignListener=function(e,t,n,r){return t.addEventListener?t.addEventListener(e,n,listenerOptions(r)):t.attachEvent?t.attachEvent("on".concat(e),n):t["on".concat(e)]=n,n};exports.assignListener=assignListener;const appendListeners=function e(t,n,r){const s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return _functionalHelpers.default.setValue("children",_functionalHelpers.default.mapObject(t.children,(function(t){return e(t,n,r,s,o)})),_functionalHelpers.default.setValue("eventListeners",_functionalHelpers.default.setValue(n,{listenerFunc:r,listenerArgs:s,listenerOptions:o},t.eventListeners),t))};exports.appendListeners=appendListeners;const bindElementListeners=function(e){return _functionalHelpers.default.setValue("eventListeners",_functionalHelpers.default.mapObject(e.eventListeners,(function(t,n){return assignListener(n,e.element,(function(n){return t.listenerFunc(n,e,t.listenerArgs)}),t.listenerOptions)})),e)},bindListeners=function(e){return e.eventListeners&&Object.keys(e.eventListeners).length&&e.element.style?bindElementListeners(e):e};exports.bindListeners=bindListeners;const bindAllListeners=function e(t){return _functionalHelpers.default.setValue("children",_functionalHelpers.default.mapObject(t.children,(function(t){return e(t)})),bindListeners(t))};exports.bindAllListeners=bindAllListeners;const gatherChildItems=function e(t,n){return n(t,t.children.reduce((function(t,r){return t.concat(e(r,n))}),[]))};exports.gatherChildItems=gatherChildItems;const getChildTest=function(e,t){return function(n,r){return n.attributes[e]&&n.attributes[e]===t?r.concat([n]):r}},getChildrenFromAttribute=function(e,t){const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_objects.documentItem.body;return gatherChildItems(n,getChildTest(e,t))};exports.getChildrenFromAttribute=getChildrenFromAttribute;const getChildrenByClass=_functionalHelpers.default.curry(getChildrenFromAttribute)("className");exports.getChildrenByClass=getChildrenByClass;const getChildrenByName=_functionalHelpers.default.curry(getChildrenFromAttribute)("name");exports.getChildrenByName=getChildrenByName;const getParentsFromAttribute=function e(t,n){const r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_objects.documentItem.body;return Object.keys(r.parentItem).length?(r.parentItem.attributes[t]||r[t]||!1)===n?e(t,n,r.parentItem).concat([r.parentItem]):e(t,n,r.parentItem):[]};exports.getParentsFromAttribute=getParentsFromAttribute;const getParentsByClass=_functionalHelpers.default.curry(getParentsFromAttribute)("className");exports.getParentsByClass=getParentsByClass;const getParentsByName=_functionalHelpers.default.curry(getParentsFromAttribute)("name");exports.getParentsByName=getParentsByName;const getParentsByTagName=_functionalHelpers.default.curry(getParentsFromAttribute)("tagName");exports.getParentsByTagName=getParentsByTagName;const getTopParentItem=function e(t){return Object.keys(t.parentItem).length?e(t.parentItem):t};exports.getTopParentItem=getTopParentItem;const renderHTML=function e(t){const n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_objects.documentItem;return _functionalHelpers.default.pipe((function(e){return _functionalHelpers.default.setValue("element",e.element&&e.element.style?e.element:bindElement(e).element,e)}),(function(e){return _functionalHelpers.default.setValue("eventListeners",_functionalHelpers.default.mapObject(e.eventListeners,(function(e){return _functionalHelpers.default.mergeObjects(e,{listenerFunc:retrieveListener(e.listenerFunc,getTopParentItem(n))})})),e)}),_functionalHelpers.default.curry(_functionalHelpers.default.setValue)("parentItem",n.body||n),(function(e){return bindListeners(appendHTML(e,n))}),(function(t){return _functionalHelpers.default.setValue("children",_functionalHelpers.default.mapObject(t.children,(function(n){return e(n,t)})),t)}))(_functionalHelpers.default.mapObject((0,_objects.createDomItem)(t),(function(e){return e}),t))};exports.renderHTML=renderHTML;