"use strict";require("core-js/modules/es.symbol.js"),require("core-js/modules/es.symbol.description.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.symbol.iterator.js"),require("core-js/modules/es.string.iterator.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/web.dom-collections.iterator.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.renderHTML=exports.getTopParentItem=exports.getParentsByTagName=exports.getParentsByName=exports.getParentsByClass=exports.getParentsFromAttribute=exports.getChildrenByName=exports.getChildrenByClass=exports.getChildrenFromAttribute=exports.gatherChildItems=exports.bindAllListeners=exports.bindListeners=exports.appendListeners=exports.assignListener=exports.retrieveListener=exports.registerListeners=exports.registerListener=exports.removeChild=exports.appendHTML=exports.bindElement=exports.generateElement=exports.updateElements=exports.updateElement=exports.setAndReturnAttribute=exports.setAttribute=exports.elementChanges=exports.elementCompareClassList=exports.elementHasAttribute=void 0,require("core-js/modules/es.string.split.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.object.keys.js"),require("core-js/modules/es.array.includes.js"),require("core-js/modules/es.string.includes.js"),require("core-js/modules/es.array.concat.js"),require("core-js/modules/es.array.splice.js"),require("core-js/modules/es.function.name.js"),require("core-js/modules/es.object.assign.js");var _functionalHelpers=_interopRequireDefault(require("functional-helpers")),_objects=require("./objects");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var elementHasAttribute=function(e,t,r){return!!e.style&&(/^(style|className)$/.test(t)?_functionalHelpers.default.compareArrays("string"==typeof r?r.split(" "):Object.keys(r),"string"==typeof r?e[t].split(" "):Object.keys(e[t])):e.hasAttribute(t)&&e.getAttribute(t)===r)};exports.elementHasAttribute=elementHasAttribute;var elementCompareClassList=function(e,t){return _functionalHelpers.default.compareArrays(t.split(" "),[].from(e.classList))};exports.elementCompareClassList=elementCompareClassList;var elementChanges=function(e){return e.element.tagName.toLowerCase()!==e.tagName.toLowerCase()?generateElement(e):_functionalHelpers.default.setValue("attributes",_functionalHelpers.default.filterObject(e.attributes,(function(t,r){return _functionalHelpers.default.filterObject(_functionalHelpers.default.mapObject(e.attributes,(function(t,r){return"object"===_typeof(t)||"className"===r?_functionalHelpers.default.filterObject(elementHasAttribute(e.element,r,t),(function(e){return 1===e})):!elementHasAttribute(e.element,r,t)})),(function(e){return!!e}))[r]})),e)};exports.elementChanges=elementChanges;var setAttribute=function(e,t,r){return e.element.setAttribute(t,r),e};exports.setAttribute=setAttribute;var setAndReturnAttribute=function(e,t,r){return e.element.setAttribute(t,r),r};exports.setAndReturnAttribute=setAndReturnAttribute;var updateElement=function(e){if(!e.element.style)return e;var t=elementChanges(e);return t.attributes=_functionalHelpers.default.mapObject(t.attributes,(function(t,r){if(_functionalHelpers.default.emptyObject(t))return r in e.element?_functionalHelpers.default.setAndReturnValue(e.element,r,t):setAndReturnAttribute(e,r,t);var n=_functionalHelpers.default.filterObject(t,(function(e,t){return/^\D+$/.test(t)}));return _functionalHelpers.default.reduceObject(n,(function(e,t,r){return _functionalHelpers.default.setValue(r,t,e)}),e.element.style)})),t};exports.updateElement=updateElement;var updateElements=function e(t){var r=updateElement(t);return _functionalHelpers.default.setValue("children",_functionalHelpers.default.mapObject(r.children,(function(t){return e(t)})),r)};exports.updateElements=updateElements;var generateElement=function(e){return updateElement(_functionalHelpers.default.setValue("element",document.createElement(e.tagName),e))};exports.generateElement=generateElement;var bindElement=function(e){return _functionalHelpers.default.setValue("element",e.element&&e.element.style?e.element:generateElement(e).element,e)};exports.bindElement=bindElement;var retrieveParentItem=function(e){return e.body?e.body:e},addUniqueToArray=function(e,t){return t.includes(e)?t:t.concat([e])},appendAndReturnChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_objects.documentItem.body;return retrieveParentItem(t).element.appendChild(e.element),e},appendHTML=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_objects.documentItem.body;return appendAndReturnChild(bindElement(e),_functionalHelpers.default.setValue("children",addUniqueToArray(e,retrieveParentItem(t).children),retrieveParentItem(t)))};exports.appendHTML=appendHTML;var removeChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_objects.documentItem.body;return t.element.removeChild(e.element),t.children.splice(t.children.indexOf(e),1)};exports.removeChild=removeChild;var registerListener=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.name,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_objects.documentItem;return Object.assign(r.eventListeners,_defineProperty({},t,e))};exports.registerListener=registerListener;var registerListeners=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_objects.documentItem;return _functionalHelpers.default.mergeObjects({},t,{eventListeners:t.eventListeners},{eventListeners:e})};exports.registerListeners=registerListeners;var retrieveListener=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_objects.documentItem;return Object.keys(t.eventListeners).includes(e)?t.eventListeners[e]:{}};exports.retrieveListener=retrieveListener;var listenerOptions=function e(t){if(void 0===e.supportsOptions){e.supportsOptions=!0;try{window.addEventListener("test",null,{capture:!1,once:!1,passive:!1})}catch(t){e.supportsOptions=!1}}return!("object"!==_typeof(t)||!e.supportsOptions)&&t},assignListener=function(e,t,r,n){return t.addEventListener?t.addEventListener(e,r,listenerOptions(n)):t.attachEvent?t.attachEvent("on".concat(e),r):t["on".concat(e)]=r,r};exports.assignListener=assignListener;var appendListeners=function e(t,r,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return _functionalHelpers.default.setValue("children",_functionalHelpers.default.mapObject(t.children,(function(t){return e(t,r,n,s,i)})),_functionalHelpers.default.setValue("eventListeners",_functionalHelpers.default.setValue(r,{listenerFunc:n,listenerArgs:s,listenerOptions:i},t.eventListeners),t))};exports.appendListeners=appendListeners;var bindElementListeners=function(e){return _functionalHelpers.default.setValue("eventListeners",_functionalHelpers.default.mapObject(e.eventListeners,(function(t,r){return assignListener(r,e.element,(function(r){return t.listenerFunc(r,e,t.listenerArgs)}),t.listenerOptions)})),e)},bindListeners=function(e){return e.eventListeners&&Object.keys(e.eventListeners).length&&e.element.style?bindElementListeners(e):e};exports.bindListeners=bindListeners;var bindAllListeners=function e(t){return _functionalHelpers.default.setValue("children",_functionalHelpers.default.mapObject(t.children,(function(t){return e(t)})),bindListeners(t))};exports.bindAllListeners=bindAllListeners;var gatherChildItems=function e(t,r){return r(t,t.children.reduce((function(t,n){return t.concat(e(n,r))}),[]))};exports.gatherChildItems=gatherChildItems;var getChildTest=function(e,t){return function(r,n){return r.attributes[e]&&r.attributes[e]===t?n.concat([r]):n}},getChildrenFromAttribute=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_objects.documentItem.body;return gatherChildItems(r,getChildTest(e,t))};exports.getChildrenFromAttribute=getChildrenFromAttribute;var getChildrenByClass=_functionalHelpers.default.curry(getChildrenFromAttribute)("className");exports.getChildrenByClass=getChildrenByClass;var getChildrenByName=_functionalHelpers.default.curry(getChildrenFromAttribute)("name");exports.getChildrenByName=getChildrenByName;var getParentsFromAttribute=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_objects.documentItem.body;return Object.keys(n.parentItem).length?(n.parentItem.attributes[t]||n[t]||!1)===r?e(t,r,n.parentItem).concat([n.parentItem]):e(t,r,n.parentItem):[]};exports.getParentsFromAttribute=getParentsFromAttribute;var getParentsByClass=_functionalHelpers.default.curry(getParentsFromAttribute)("className");exports.getParentsByClass=getParentsByClass;var getParentsByName=_functionalHelpers.default.curry(getParentsFromAttribute)("name");exports.getParentsByName=getParentsByName;var getParentsByTagName=_functionalHelpers.default.curry(getParentsFromAttribute)("tagName");exports.getParentsByTagName=getParentsByTagName;var getTopParentItem=function e(t){return Object.keys(t.parentItem).length?e(t.parentItem):t};exports.getTopParentItem=getTopParentItem;var renderHTML=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_objects.documentItem;return _functionalHelpers.default.pipe((function(e){return _functionalHelpers.default.setValue("element",e.element&&e.element.style?e.element:bindElement(e).element,e)}),(function(e){return _functionalHelpers.default.setValue("eventListeners",_functionalHelpers.default.mapObject(e.eventListeners,(function(e){return _functionalHelpers.default.mergeObjects({},e,{listenerFunc:retrieveListener(e.listenerFunc,getTopParentItem(r))})})),e)}),_functionalHelpers.default.curry(_functionalHelpers.default.setValue)("parentItem",r.body||r),(function(e){return bindListeners(appendHTML(e,r))}),(function(t){return _functionalHelpers.default.setValue("children",_functionalHelpers.default.mapObject(t.children,(function(r){return e(r,t)})),t)}))(_functionalHelpers.default.mapObject((0,_objects.createDomItem)(t),(function(e){return e}),t))};exports.renderHTML=renderHTML;