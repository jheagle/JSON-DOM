"use strict";require("core-js/modules/es.symbol"),require("core-js/modules/es.symbol.description"),require("core-js/modules/es.symbol.iterator"),require("core-js/modules/es.array.concat"),require("core-js/modules/es.array.filter"),require("core-js/modules/es.array.from"),require("core-js/modules/es.array.index-of"),require("core-js/modules/es.array.iterator"),require("core-js/modules/es.array.map"),require("core-js/modules/es.array.reduce"),require("core-js/modules/es.array.slice"),require("core-js/modules/es.function.name"),require("core-js/modules/es.object.assign"),require("core-js/modules/es.object.keys"),require("core-js/modules/es.object.to-string"),require("core-js/modules/es.regexp.to-string"),require("core-js/modules/es.string.iterator"),require("core-js/modules/web.dom-collections.iterator"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDomItemFromElement=exports.getPointFromElement=exports.adjacentEdgePoints=exports.adjacentPoints=exports.getAllPoints=exports.getDomItemFromPoint=exports.checkValidPoint=exports.randDirection=exports.getAxisLengths=exports.checkInBetween=exports.testPointsBetween=exports.getPointsLines=exports.getPointsLine=exports.lineEndPoint=exports.randomStart=exports.pointsToDirection=exports.getFirstAxisOfCoordinate=exports.getHighestAbsoluteCoordinate=exports.areEqualPoints=exports.pointDifference=exports.nextCell=exports.bindPointData=void 0;var _functionalHelpers=_interopRequireDefault(require("functional-helpers")),_objects=require("./objects");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bindPointData=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,_objects.point)(0,0,0);return _functionalHelpers.default.mergeObjects(t,t.point?{point:_functionalHelpers.default.cloneObject(r)}:{children:t.children.map((function(t,n){return e(t,Object.assign(r,_defineProperty({},t.axis,n)))}))})};exports.bindPointData=bindPointData;var nextCell=function(e,t){return(0,_objects.point)(e.x+t.x,e.y+t.y,e.z+t.z)};exports.nextCell=nextCell;var pointDifference=function(e,t){return(0,_objects.point)(t.x-e.x,t.y-e.y,t.z-e.z)};exports.pointDifference=pointDifference;var areEqualPoints=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z};exports.areEqualPoints=areEqualPoints;var getHighestAbsoluteCoordinate=function(e){return _functionalHelpers.default.reduceObject(e,_functionalHelpers.default.getAbsoluteMax,0)};exports.getHighestAbsoluteCoordinate=getHighestAbsoluteCoordinate;var getFirstAxisOfCoordinate=function(e,t){return Object.keys(e).filter((function(r){return e[r]===t}))[0]||!1};exports.getFirstAxisOfCoordinate=getFirstAxisOfCoordinate;var pointAndCoordinateToDirection=function(e,t){return!1!==(r=getFirstAxisOfCoordinate(e,t))?_functionalHelpers.default.mergeObjects((0,_objects.point)(0,0,0),_defineProperty({},"".concat(r),t>0?1:-1)):(0,_objects.point)(0,0,0);var r},pointToDirection=function(e){return pointAndCoordinateToDirection(e,getHighestAbsoluteCoordinate(e))},pointsToDirection=function(e,t){return pointToDirection(pointDifference(e,t))};exports.pointsToDirection=pointsToDirection;var randomStart=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,_objects.point)(10,10,10);return(0,_objects.point)(_functionalHelpers.default.randomInteger(r.x-(e-1)*t.x),_functionalHelpers.default.randomInteger(r.y-(e-1)*t.y),_functionalHelpers.default.randomInteger(r.z-(e-1)*t.z))};exports.randomStart=randomStart;var lineEndPoint=function(e,t,r){return(0,_objects.point)(e.x+r.x*(t-1),e.y+r.y*(t-1),e.z+r.z*(t-1))};exports.lineEndPoint=lineEndPoint;var getPointsLine=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return areEqualPoints(t,r)?n.concat([t]):e(nextCell(t,pointsToDirection(t,r)),r,n.concat([t]))};exports.getPointsLine=getPointsLine;var getPointsLines=function(e){return e.reduce((function(e,t){return e.concat(getPointsLine.apply(void 0,_toConsumableArray(t)))}),[])};exports.getPointsLines=getPointsLines;var testPointsBetween=function(e,t,r,n){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return getPointsLine(e,t).filter((function(e,t,r){return 0!==t&&t!==r.length-1||o})).reduce((function(e,t){return _functionalHelpers.default.mergeObjects(e,_defineProperty({},"".concat(n(t,r)),[t]))}),{true:[],false:[]})};exports.testPointsBetween=testPointsBetween;var checkInBetween=function(){return!!testPointsBetween.apply(void 0,arguments).true.length};exports.checkInBetween=checkInBetween;var getAxisLengths=function(e){return(0,_objects.point)(e.children[0].children[0].children.length,e.children[0].children.length,e.children.length)};exports.getAxisLengths=getAxisLengths;var randDirection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e[_functionalHelpers.default.randomInteger(e.length)]:(0,_objects.point)(0,0,0)};exports.randDirection=randDirection;var checkValidPoint=function(e,t){return!!(t.children[e.z]&&t.children[e.z].children[e.y]&&t.children[e.z].children[e.y].children[e.x]&&t.children[e.z].children[e.y].children[e.x].point)};exports.checkValidPoint=checkValidPoint;var getDomItemFromPoint=function(e,t){return!!checkValidPoint(e,t)&&t.children[e.z].children[e.y].children[e.x]};exports.getDomItemFromPoint=getDomItemFromPoint;var getAllPoints=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.point?r.concat([t.point]):t.children.reduce((function(t,r){return t.concat(e(r,[]))}),[])};exports.getAllPoints=getAllPoints;var adjacentPoints=function(e,t){return getPointsLines([[(0,_objects.point)(-1,1,1),(0,_objects.point)(1,-1,-1)],[(0,_objects.point)(1,1,1),(0,_objects.point)(-1,1,-1)],[(0,_objects.point)(-1,-1,1),(0,_objects.point)(1,-1,1)],[(0,_objects.point)(1,0,0),(0,_objects.point)(1,1,-1)],[(0,_objects.point)(-1,1,0),(0,_objects.point)(1,1,0)]]).concat([(0,_objects.point)(0,0,1),(0,_objects.point)(1,0,0),(0,_objects.point)(-1,0,-1),(0,_objects.point)(0,0,-1)]).map((function(t){return nextCell(e,t)})).filter((function(r){return checkValidPoint(nextCell(e,r),t)}))};exports.adjacentPoints=adjacentPoints;var adjacentEdgePoints=function(e,t){return[(0,_objects.point)(-1,0,0),(0,_objects.point)(1,0,0),(0,_objects.point)(0,-1,0),(0,_objects.point)(0,1,0),(0,_objects.point)(0,0,-1),(0,_objects.point)(0,0,1)].map((function(t){return nextCell(e,t)})).filter((function(e){return checkValidPoint(e,t)}))};exports.adjacentEdgePoints=adjacentEdgePoints;var getPointFromElement=function(e){return(0,_objects.point)(Array.from(e.parentNode.childNodes).indexOf(e),Array.from(e.parentNode.parentNode.childNodes).indexOf(e.parentNode),Array.from(e.parentNode.parentNode.parentNode.childNodes).indexOf(e.parentNode.parentNode))};exports.getPointFromElement=getPointFromElement;var getDomItemFromElement=function(e,t){return getDomItemFromPoint(getPointFromElement(e),t)};exports.getDomItemFromElement=getDomItemFromElement;